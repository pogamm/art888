<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>Health Dashboard</title>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    body {
      font-family: sans-serif;
      background: #f4f6fb;
      padding: 16px;
    }
    .card {
      background: white;
      border-radius: 16px;
      padding: 16px;
      margin-bottom: 16px;
      box-shadow: 0 8px 20px rgba(0,0,0,.08);
    }
    h2 {
      margin-top: 0;
      text-align: center;
    }
  </style>
</head>
<body>

<div class="card">
  <h2>‡πÅ‡∏ú‡∏ô‡∏†‡∏π‡∏°‡∏¥‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏ß‡∏∞‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h2>
  <canvas id="chart"></canvas>
</div>

<div class="card">
  <h2>‡∏™‡∏£‡∏∏‡∏õ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</h2>
  <pre id="summary"></pre>
</div>

<script>
/* ======================
   1) ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å Thunkable
   ====================== */
const p = new URLSearchParams(location.search);

const energy = Number(p.get("energy")) || 0;
const mind   = Number(p.get("mind")) || 0;
const focus  = Number(p.get("focus")) || 0;
const life   = Number(p.get("life")) || 0;
const total  = Number(p.get("total")) || 0;

/* ======================
   2) ‡∏ß‡∏≤‡∏î‡πÅ‡∏ú‡∏ô‡∏†‡∏π‡∏°‡∏¥‡πÅ‡∏ó‡πà‡∏á
   ====================== */
new Chart(document.getElementById("chart"), {
  type: "bar",
  data: {
    labels: ["Energy", "Mind", "Focus", "Life", "Total"],
    datasets: [{
      data: [energy, mind, focus, life, total],
      backgroundColor: [
        "#60A5FA", "#F87171", "#FBBF24", "#34D399", "#FB923C"
      ],
      borderRadius: 10
    }]
  },
  options: {
    responsive: true,
    plugins: { legend: { display: false } },
    scales: {
      y: { beginAtZero: true, max: 40 }
    }
  }
});

/* ======================
   3) ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
   ====================== */
function level(v, name) {
  if (v >= 8) return `${name}: ‡∏î‡∏µ‡∏°‡∏≤‡∏Å üëç`;
  if (v >= 5) return `${name}: ‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á üôÇ`;
  return `${name}: ‡∏Ñ‡πà‡∏≠‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡∏ï‡πà‡∏≥ ‚ö†Ô∏è`;
}

let text =
`‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏ß‡∏∞‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ

${level(energy,"‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô")}
${level(mind,"‡∏à‡∏¥‡∏ï‡πÉ‡∏à")}
${level(focus,"‡∏™‡∏°‡∏≤‡∏ò‡∏¥")}
${level(life,"‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï")}

‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°: ${total}/40
`;

document.getElementById("summary").innerText = text;

/* ======================
   4) ‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ Thunkable
   ====================== */
if (window.Thunks) {
  Thunks.sendMessage(text);
}
</script>

</body>
</html>